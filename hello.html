<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Step01_Example4.html</title>
	<style>
		#myCanvas{
			border: 1px solid red;
		}
	</style>
</head>
<body>
<canvas id="myCanvas" width="500" height="500"></canvas>
<script>
	var canvas=document.querySelector("#myCanvas");
	var context=canvas.getContext("2d");

	//시계 다이얼 이미지 로딩 
	var dialImg=new Image();
	dialImg.src="images/dial.png";

	//초침 
	var secImg=new Image();
	secImg.src="images/clock_sec.png";
	//분침
	var minImg=new Image();
	minImg.src="images/clock_min.png";
	//시침
	var hourImg=new Image();
	hourImg.src="images/clock_hour.png";

	//현재 시간
	var hour=9;
	var min=30;
	var sec=5;

	//회전 각도 계산
	var rSec=sec*6*(Math.PI/180);
	var rMin=min*6*(Math.PI/180) + 6*(sec/60)*(Math.PI/180); 
	var rHour=hour*30*(Math.PI/180) + 30*(min/60)*(Math.PI/180);
	//이미지 로딩된 카운트 
	var loadingCount=0;

	dialImg.onload=function(){
		loadingCount++;
		if(loadingCount==4){//이미지가 모두 로딩 되었으면 
			drawClock();//시계를 그린다. 
		}
	};
	secImg.onload=function(){
		loadingCount++;
		if(loadingCount==4){//이미지가 모두 로딩 되었으면 
			drawClock();//시계를 그린다. 
		}
	};
	minImg.onload=function(){
		loadingCount++;
		if(loadingCount==4){//이미지가 모두 로딩 되었으면 
			drawClock();//시계를 그린다. 
		}
	};
	hourImg.onload=function(){
		loadingCount++;
		if(loadingCount==4){//이미지가 모두 로딩 되었으면 
			drawClock();//시계를 그린다. 
		}
	};

	//시계를 그리는 함수 
	function drawClock(){
		context.translate(250, 250);
		//시계 다이얼 그리기 
		context.drawImage(dialImg, -150, -150, 300, 300);

		//초침 그리기
		context.rotate(rSec);
		context.drawImage(secImg, -5, -130, 10, 130);
		//분침 그리기
		context.rotate(rMin-rSec);
		context.drawImage(minImg, -5, -130, 10, 130);
		//시침 그리기 
		context.rotate(rHour-rMin);
		context.drawImage(hourImg, -5, -130, 10, 130);
	}
</script>	
</body>
</html>